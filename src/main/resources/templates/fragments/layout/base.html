<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:fragment="layout(pageTitle, bodyFragment)">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">Finance Management</title>

    <!-- Bootstrap CSS & Icons -->
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"/>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
            rel="stylesheet"/>

    <!-- Custom Styles -->
    <link rel="stylesheet" th:href="@{/css/custom.css}"/>
</head>
<body>
<div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    <nav id="sidebar-wrapper" class="bg-dark border-end">
        <div class="sidebar-heading text-center py-4 text-white fs-4 fw-bold">
            <i class="bi bi-cash-stack me-2"></i>FinanceApp
        </div>
        <div class="list-group list-group-flush">
            <a th:href="@{/users}"
               class="list-group-item list-group-item-action bg-dark text-white">
                <i class="bi bi-people-fill me-2"></i>Usuarios
            </a>
            <a href="#"
               class="list-group-item list-group-item-action bg-dark text-white">
                <i class="bi bi-bar-chart-line me-2"></i>Estadísticas
            </a>
            <a href="#"
               class="list-group-item list-group-item-action bg-dark text-white">
                <i class="bi bi-gear-fill me-2"></i>Configuración
            </a>
        </div>
    </nav>

    <!-- Page Content -->
    <div id="page-content-wrapper" class="w-100">
        <!-- Top Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
            <div class="container-fluid">
                <button class="btn btn-primary" id="menu-toggle">
                    <i class="bi bi-list"></i>
                </button>
                <span class="navbar-text ms-3">
            <small th:text="${pageTitle}">Panel de Control</small>
          </span>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="container-fluid mt-4">
            <div th:replace="fragments/header :: header"></div>

            <!-- Aquí Thymeleaf insertará el BODY de la vista hija -->
            <div th:insert="${bodyFragment}"></div>

            <div th:replace="fragments/footer :: footer"></div>
        </div>
    </div>
</div>

<!-- Bootstrap JS Bundle -->
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
</script>
<!-- Sidebar Toggle Script -->
<script>
    document.getElementById('menu-toggle')
      .addEventListener('click', e => {
        e.preventDefault();
        document.getElementById('wrapper').classList.toggle('toggled');
      });
</script>
</body>
</html>